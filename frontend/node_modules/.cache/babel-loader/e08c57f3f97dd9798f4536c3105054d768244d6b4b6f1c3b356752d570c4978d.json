{"ast":null,"code":"var _jsxFileName = \"/Users/geraldobuseh/Downloads/student-assist-bot/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport { ExclamationCircleIcon, CalculatorIcon, BeakerIcon, ClockIcon, BookOpenIcon, CodeBracketIcon } from '@heroicons/react/24/outline';\n\n// Constants\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:5000';\nconst INITIAL_MESSAGE = 'Hello!';\nconst SUBJECTS = {\n  math: {\n    name: 'Mathematics',\n    description: 'Algebra, Calculus, Geometry, and more',\n    icon: '📐'\n  },\n  science: {\n    name: 'Science',\n    description: 'Physics, Chemistry, Biology',\n    icon: '🔬'\n  },\n  history: {\n    name: 'History',\n    description: 'World History, US History, Ancient Civilizations',\n    icon: '📜'\n  },\n  english: {\n    name: 'English',\n    description: 'Literature, Writing, Grammar',\n    icon: '📚'\n  },\n  programming: {\n    name: 'Programming',\n    description: 'Coding, Algorithms, Computer Science',\n    icon: '💻'\n  }\n};\n\n// Tool Components\nconst Calculator = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"tool-component\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"calculator-display\",\n    children: \"0\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"calculator-buttons\",\n    children: ['7', '8', '9', '/', '4', '5', '6', '*', '1', '2', '3', '-', '0', '.', '=', '+'].map(btn => /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"calc-btn\",\n      children: btn\n    }, btn, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 39,\n  columnNumber: 3\n}, this);\n_c = Calculator;\nconst PeriodicTable = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"tool-component\",\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"periodic-table\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"element\",\n      style: {\n        gridColumn: 1,\n        gridRow: 1\n      },\n      children: \"H\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"element\",\n      style: {\n        gridColumn: 18,\n        gridRow: 1\n      },\n      children: \"He\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 50,\n  columnNumber: 3\n}, this);\n_c2 = PeriodicTable;\nconst Timeline = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"tool-component\",\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"timeline\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timeline-item\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timeline-date\",\n        children: \"2023\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timeline-content\",\n        children: \"Modern Era\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 61,\n  columnNumber: 3\n}, this);\n_c3 = Timeline;\nconst GrammarChecker = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"tool-component\",\n  children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n    placeholder: \"Enter text to check grammar...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"check-btn\",\n    children: \"Check Grammar\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 73,\n  columnNumber: 3\n}, this);\n_c4 = GrammarChecker;\nconst CodeRunner = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"tool-component\",\n  children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n    placeholder: \"Enter code to run...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"run-btn\",\n    children: \"Run Code\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 80,\n  columnNumber: 3\n}, this);\n\n// Subject-specific tools\n_c5 = CodeRunner;\nconst SUBJECT_TOOLS = {\n  math: {\n    name: 'Mathematics Tools',\n    icon: /*#__PURE__*/_jsxDEV(CalculatorIcon, {\n      className: \"w-6 h-6\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }, this),\n    tools: [{\n      name: 'Calculator',\n      component: /*#__PURE__*/_jsxDEV(Calculator, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 20\n      }, this),\n      description: 'Scientific calculator for complex calculations',\n      icon: /*#__PURE__*/_jsxDEV(CalculatorIcon, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 15\n      }, this)\n    }, {\n      name: 'Graph Plotter',\n      component: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Graph Plotter Component\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 20\n      }, this),\n      description: 'Plot and analyze mathematical functions',\n      icon: /*#__PURE__*/_jsxDEV(CalculatorIcon, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 15\n      }, this)\n    }, {\n      name: 'Equation Solver',\n      component: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Equation Solver Component\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 20\n      }, this),\n      description: 'Solve linear and quadratic equations',\n      icon: /*#__PURE__*/_jsxDEV(CalculatorIcon, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 15\n      }, this)\n    }]\n  },\n  science: {\n    name: 'Science Tools',\n    icon: /*#__PURE__*/_jsxDEV(BeakerIcon, {\n      className: \"w-6 h-6\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }, this),\n    tools: [{\n      name: 'Periodic Table',\n      component: /*#__PURE__*/_jsxDEV(PeriodicTable, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 20\n      }, this),\n      description: 'Interactive periodic table of elements',\n      icon: /*#__PURE__*/_jsxDEV(BeakerIcon, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 15\n      }, this)\n    }, {\n      name: 'Unit Converter',\n      component: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Unit Converter Component\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 20\n      }, this),\n      description: 'Convert between different units',\n      icon: /*#__PURE__*/_jsxDEV(BeakerIcon, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 15\n      }, this)\n    }, {\n      name: 'Chemical Calculator',\n      component: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Chemical Calculator Component\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 20\n      }, this),\n      description: 'Calculate chemical reactions',\n      icon: /*#__PURE__*/_jsxDEV(BeakerIcon, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 15\n      }, this)\n    }]\n  },\n  history: {\n    name: 'History Tools',\n    icon: /*#__PURE__*/_jsxDEV(ClockIcon, {\n      className: \"w-6 h-6\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }, this),\n    tools: [{\n      name: 'Timeline',\n      component: /*#__PURE__*/_jsxDEV(Timeline, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 20\n      }, this),\n      description: 'View historical events on a timeline',\n      icon: /*#__PURE__*/_jsxDEV(ClockIcon, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 15\n      }, this)\n    }, {\n      name: 'Map Viewer',\n      component: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Map Viewer Component\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 20\n      }, this),\n      description: 'Explore historical maps',\n      icon: /*#__PURE__*/_jsxDEV(ClockIcon, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 15\n      }, this)\n    }, {\n      name: 'Event Search',\n      component: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Event Search Component\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 20\n      }, this),\n      description: 'Search historical events',\n      icon: /*#__PURE__*/_jsxDEV(ClockIcon, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 15\n      }, this)\n    }]\n  },\n  english: {\n    name: 'English Tools',\n    icon: /*#__PURE__*/_jsxDEV(BookOpenIcon, {\n      className: \"w-6 h-6\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }, this),\n    tools: [{\n      name: 'Grammar Checker',\n      component: /*#__PURE__*/_jsxDEV(GrammarChecker, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 20\n      }, this),\n      description: 'Check grammar and spelling',\n      icon: /*#__PURE__*/_jsxDEV(BookOpenIcon, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 15\n      }, this)\n    }, {\n      name: 'Thesaurus',\n      component: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Thesaurus Component\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 20\n      }, this),\n      description: 'Find synonyms and antonyms',\n      icon: /*#__PURE__*/_jsxDEV(BookOpenIcon, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 15\n      }, this)\n    }, {\n      name: 'Writing Assistant',\n      component: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Writing Assistant Component\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 20\n      }, this),\n      description: 'Get writing suggestions',\n      icon: /*#__PURE__*/_jsxDEV(BookOpenIcon, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 15\n      }, this)\n    }]\n  },\n  programming: {\n    name: 'Programming Tools',\n    icon: /*#__PURE__*/_jsxDEV(CodeBracketIcon, {\n      className: \"w-6 h-6\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }, this),\n    tools: [{\n      name: 'Code Runner',\n      component: /*#__PURE__*/_jsxDEV(CodeRunner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 20\n      }, this),\n      description: 'Run and test code snippets',\n      icon: /*#__PURE__*/_jsxDEV(CodeBracketIcon, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 15\n      }, this)\n    }, {\n      name: 'Syntax Checker',\n      component: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Syntax Checker Component\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 20\n      }, this),\n      description: 'Check code syntax',\n      icon: /*#__PURE__*/_jsxDEV(CodeBracketIcon, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 15\n      }, this)\n    }, {\n      name: 'API Reference',\n      component: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"API Reference Component\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 20\n      }, this),\n      description: 'Quick access to API documentation',\n      icon: /*#__PURE__*/_jsxDEV(CodeBracketIcon, {\n        className: \"w-6 h-6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 15\n      }, this)\n    }]\n  }\n};\n\n// Helper function to convert markdown-like formatting to HTML\nconst formatMessage = content => {\n  if (!content) return '';\n\n  // Split content into lines\n  const lines = content.split('\\n');\n  let formattedContent = '';\n  let currentList = '';\n  let inList = false;\n  let isFirstParagraph = true;\n  let listType = '';\n  let listLevel = 0;\n  lines.forEach(line => {\n    // Handle bold text first (before other formatting)\n    line = line.replace(/\\*\\*(.*?)\\*\\*/g, (match, text) => {\n      return `<strong>${text}</strong>`;\n    });\n\n    // Handle headings\n    if (line.startsWith('# ')) {\n      formattedContent += `<h2>${line.substring(2)}</h2>`;\n      return;\n    }\n    if (line.startsWith('## ')) {\n      formattedContent += `<h3>${line.substring(3)}</h3>`;\n      return;\n    }\n\n    // Handle italic text\n    line = line.replace(/\\*(.*?)\\*/g, '<em>$1</em>');\n\n    // Handle lists\n    if (line.trim().startsWith('* ')) {\n      if (!inList) {\n        inList = true;\n        // Determine list type based on content\n        if (line.includes(':')) {\n          listType = 'category-list';\n        } else if (line.includes('?')) {\n          listType = 'question-list';\n        } else {\n          listType = 'topic-list';\n        }\n        currentList = `<ul class=\"${listType}\">`;\n      }\n      currentList += `<li>${line.substring(2).trim()}</li>`;\n      return;\n    } else if (inList) {\n      inList = false;\n      formattedContent += currentList + '</ul>';\n      currentList = '';\n      listType = '';\n    }\n\n    // Handle example blocks\n    if (line.startsWith('Example:')) {\n      formattedContent += `<div class=\"example\">${line.substring(8).trim()}</div>`;\n      return;\n    }\n\n    // Handle notes\n    if (line.startsWith('Note:')) {\n      formattedContent += `<div class=\"note\">${line.substring(5).trim()}</div>`;\n      return;\n    }\n\n    // Handle regular paragraphs\n    if (line.trim()) {\n      if (isFirstParagraph) {\n        formattedContent += `<p class=\"intro\">${line}</p>`;\n        isFirstParagraph = false;\n      } else {\n        formattedContent += `<p>${line}</p>`;\n      }\n    }\n  });\n\n  // Close any open list\n  if (inList) {\n    formattedContent += currentList + '</ul>';\n  }\n  return formattedContent;\n};\nfunction App() {\n  _s();\n  // State management\n  const [input, setInput] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [selectedSubject, setSelectedSubject] = useState(null);\n  const [showSubjectSelector, setShowSubjectSelector] = useState(true);\n  const messagesEndRef = useRef(null);\n  const [activeTool, setActiveTool] = useState(null);\n  const [showTools, setShowTools] = useState(false);\n\n  // Auto-scroll to bottom when messages change\n  const scrollToBottom = useCallback(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, []);\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages, scrollToBottom]);\n\n  // Error handling helper\n  const handleError = useCallback(err => {\n    var _err$response, _err$response2;\n    console.error('Error in API call:', ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err);\n    const errorDetails = ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data) || {};\n    setError(`Error: ${errorDetails.error || 'Failed to send message'}\\n` + `Details: ${errorDetails.details || 'Please try again'}\\n` + (errorDetails.code ? `Code: ${errorDetails.code}\\n` : '') + (errorDetails.type ? `Type: ${errorDetails.type}` : ''));\n  }, []);\n\n  // Message sending logic\n  const sendMessage = useCallback(async (messageContent = null) => {\n    const content = messageContent || input.trim();\n    if (!content) return;\n    const userMsg = {\n      role: 'user',\n      content,\n      subject: selectedSubject\n    };\n    const newMessages = [...messages, userMsg];\n    setMessages(newMessages);\n    if (!messageContent) setInput('');\n    setError(null);\n    setIsLoading(true);\n    try {\n      console.log('Sending request to server:', {\n        messages: newMessages,\n        subject: selectedSubject\n      });\n      const res = await axios.post(`${API_URL}/chat`, {\n        messages: newMessages,\n        subject: selectedSubject\n      });\n      console.log('Received response from server:', res.data);\n\n      // Extract the message from the nested structure\n      const botMessage = res.data.message || res.data;\n      console.log('Processed bot message:', botMessage);\n      setMessages(prev => [...prev, botMessage]);\n    } catch (err) {\n      console.error('Error in sendMessage:', err);\n      handleError(err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [input, messages, handleError, selectedSubject]);\n\n  // Keyboard event handler\n  const handleKeyPress = useCallback(e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  }, [sendMessage]);\n\n  // Send initial message\n  useEffect(() => {\n    if (messages.length === 0 && selectedSubject) {\n      sendMessage(`I need help with ${SUBJECTS[selectedSubject].name}`);\n    }\n  }, [messages.length, sendMessage, selectedSubject]);\n  const handleSubjectSelect = subject => {\n    setSelectedSubject(subject);\n    setShowSubjectSelector(false);\n    setMessages([]); // Clear previous messages when changing subjects\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"app-title\",\n      children: \"Student Assist Bot\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 7\n    }, this), showSubjectSelector ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"subject-selector\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Select a Subject\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"subject-grid\",\n        children: Object.entries(SUBJECTS).map(([key, subject]) => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"subject-card\",\n          onClick: () => handleSubjectSelect(key),\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"subject-icon\",\n            children: subject.icon\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"subject-name\",\n            children: subject.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"subject-description\",\n            children: subject.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 17\n          }, this)]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"subject-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"change-subject-btn\",\n          onClick: () => setShowSubjectSelector(true),\n          children: \"Change Subject\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"current-subject\",\n          children: [SUBJECTS[selectedSubject].icon, \" \", SUBJECTS[selectedSubject].name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"tools-toggle-btn\",\n          onClick: () => setShowTools(!showTools),\n          children: [SUBJECT_TOOLS[selectedSubject].icon, /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Tools\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-content\",\n        children: [showTools && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tools-panel\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: SUBJECT_TOOLS[selectedSubject].name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tools-grid\",\n            children: SUBJECT_TOOLS[selectedSubject].tools.map((tool, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"tool-card\",\n              onClick: () => setActiveTool(tool.component),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"tool-icon\",\n                children: tool.icon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                children: tool.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: tool.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 442,\n                columnNumber: 23\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-container\",\n          children: [activeTool && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"active-tool\",\n            children: activeTool\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 17\n          }, this), messages.map((msg, i) => {\n            console.log('Rendering message:', msg);\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `message ${msg.role}`,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `message-content ${msg.format === 'formatted' ? 'formatted' : ''}`,\n                dangerouslySetInnerHTML: {\n                  __html: msg.format === 'formatted' ? msg.content || '' : formatMessage(msg.content || '')\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 459,\n                columnNumber: 21\n              }, this)\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 19\n            }, this);\n          }), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message assistant\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"typing-indicator\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 471,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 472,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: messagesEndRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        role: \"alert\",\n        children: [/*#__PURE__*/_jsxDEV(ExclamationCircleIcon, {\n          \"aria-hidden\": \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n          style: {\n            whiteSpace: 'pre-wrap',\n            margin: 0\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: input,\n          onChange: e => setInput(e.target.value),\n          onKeyPress: handleKeyPress,\n          placeholder: `Ask a question about ${SUBJECTS[selectedSubject].name}... (Press Enter to send)`,\n          rows: \"2\",\n          disabled: isLoading,\n          \"aria-label\": \"Message input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => sendMessage(),\n          disabled: isLoading || !input.trim(),\n          \"aria-label\": \"Send message\",\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 388,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"+je8eFR85t5ObnNkdNh8MGF3PpM=\");\n_c6 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"Calculator\");\n$RefreshReg$(_c2, \"PeriodicTable\");\n$RefreshReg$(_c3, \"Timeline\");\n$RefreshReg$(_c4, \"GrammarChecker\");\n$RefreshReg$(_c5, \"CodeRunner\");\n$RefreshReg$(_c6, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","axios","ExclamationCircleIcon","CalculatorIcon","BeakerIcon","ClockIcon","BookOpenIcon","CodeBracketIcon","jsxDEV","_jsxDEV","Fragment","_Fragment","API_URL","INITIAL_MESSAGE","SUBJECTS","math","name","description","icon","science","history","english","programming","Calculator","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","btn","_c","PeriodicTable","style","gridColumn","gridRow","_c2","Timeline","_c3","GrammarChecker","placeholder","_c4","CodeRunner","_c5","SUBJECT_TOOLS","tools","component","formatMessage","content","lines","split","formattedContent","currentList","inList","isFirstParagraph","listType","listLevel","forEach","line","replace","match","text","startsWith","substring","trim","includes","App","_s","input","setInput","messages","setMessages","isLoading","setIsLoading","error","setError","selectedSubject","setSelectedSubject","showSubjectSelector","setShowSubjectSelector","messagesEndRef","activeTool","setActiveTool","showTools","setShowTools","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleError","err","_err$response","_err$response2","console","response","data","errorDetails","details","code","type","sendMessage","messageContent","userMsg","role","subject","newMessages","log","res","post","botMessage","message","prev","handleKeyPress","e","key","shiftKey","preventDefault","length","handleSubjectSelect","Object","entries","onClick","tool","index","msg","i","format","dangerouslySetInnerHTML","__html","ref","whiteSpace","margin","value","onChange","target","onKeyPress","rows","disabled","_c6","$RefreshReg$"],"sources":["/Users/geraldobuseh/Downloads/student-assist-bot/frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport { ExclamationCircleIcon, CalculatorIcon, BeakerIcon, ClockIcon, BookOpenIcon, CodeBracketIcon } from '@heroicons/react/24/outline';\n\n// Constants\nconst API_URL = 'http://localhost:5000';\nconst INITIAL_MESSAGE = 'Hello!';\n\nconst SUBJECTS = {\n  math: {\n    name: 'Mathematics',\n    description: 'Algebra, Calculus, Geometry, and more',\n    icon: '📐'\n  },\n  science: {\n    name: 'Science',\n    description: 'Physics, Chemistry, Biology',\n    icon: '🔬'\n  },\n  history: {\n    name: 'History',\n    description: 'World History, US History, Ancient Civilizations',\n    icon: '📜'\n  },\n  english: {\n    name: 'English',\n    description: 'Literature, Writing, Grammar',\n    icon: '📚'\n  },\n  programming: {\n    name: 'Programming',\n    description: 'Coding, Algorithms, Computer Science',\n    icon: '💻'\n  }\n};\n\n// Tool Components\nconst Calculator = () => (\n  <div className=\"tool-component\">\n    <div className=\"calculator-display\">0</div>\n    <div className=\"calculator-buttons\">\n      {['7', '8', '9', '/', '4', '5', '6', '*', '1', '2', '3', '-', '0', '.', '=', '+'].map((btn) => (\n        <button key={btn} className=\"calc-btn\">{btn}</button>\n      ))}\n    </div>\n  </div>\n);\n\nconst PeriodicTable = () => (\n  <div className=\"tool-component\">\n    <div className=\"periodic-table\">\n      {/* Basic periodic table layout */}\n      <div className=\"element\" style={{ gridColumn: 1, gridRow: 1 }}>H</div>\n      <div className=\"element\" style={{ gridColumn: 18, gridRow: 1 }}>He</div>\n      {/* Add more elements as needed */}\n    </div>\n  </div>\n);\n\nconst Timeline = () => (\n  <div className=\"tool-component\">\n    <div className=\"timeline\">\n      <div className=\"timeline-item\">\n        <div className=\"timeline-date\">2023</div>\n        <div className=\"timeline-content\">Modern Era</div>\n      </div>\n      {/* Add more timeline items */}\n    </div>\n  </div>\n);\n\nconst GrammarChecker = () => (\n  <div className=\"tool-component\">\n    <textarea placeholder=\"Enter text to check grammar...\" />\n    <button className=\"check-btn\">Check Grammar</button>\n  </div>\n);\n\nconst CodeRunner = () => (\n  <div className=\"tool-component\">\n    <textarea placeholder=\"Enter code to run...\" />\n    <button className=\"run-btn\">Run Code</button>\n  </div>\n);\n\n// Subject-specific tools\nconst SUBJECT_TOOLS = {\n  math: {\n    name: 'Mathematics Tools',\n    icon: <CalculatorIcon className=\"w-6 h-6\" />,\n    tools: [\n      {\n        name: 'Calculator',\n        component: <Calculator />,\n        description: 'Scientific calculator for complex calculations',\n        icon: <CalculatorIcon className=\"w-6 h-6\" />\n      },\n      {\n        name: 'Graph Plotter',\n        component: <div>Graph Plotter Component</div>,\n        description: 'Plot and analyze mathematical functions',\n        icon: <CalculatorIcon className=\"w-6 h-6\" />\n      },\n      {\n        name: 'Equation Solver',\n        component: <div>Equation Solver Component</div>,\n        description: 'Solve linear and quadratic equations',\n        icon: <CalculatorIcon className=\"w-6 h-6\" />\n      }\n    ]\n  },\n  science: {\n    name: 'Science Tools',\n    icon: <BeakerIcon className=\"w-6 h-6\" />,\n    tools: [\n      {\n        name: 'Periodic Table',\n        component: <PeriodicTable />,\n        description: 'Interactive periodic table of elements',\n        icon: <BeakerIcon className=\"w-6 h-6\" />\n      },\n      {\n        name: 'Unit Converter',\n        component: <div>Unit Converter Component</div>,\n        description: 'Convert between different units',\n        icon: <BeakerIcon className=\"w-6 h-6\" />\n      },\n      {\n        name: 'Chemical Calculator',\n        component: <div>Chemical Calculator Component</div>,\n        description: 'Calculate chemical reactions',\n        icon: <BeakerIcon className=\"w-6 h-6\" />\n      }\n    ]\n  },\n  history: {\n    name: 'History Tools',\n    icon: <ClockIcon className=\"w-6 h-6\" />,\n    tools: [\n      {\n        name: 'Timeline',\n        component: <Timeline />,\n        description: 'View historical events on a timeline',\n        icon: <ClockIcon className=\"w-6 h-6\" />\n      },\n      {\n        name: 'Map Viewer',\n        component: <div>Map Viewer Component</div>,\n        description: 'Explore historical maps',\n        icon: <ClockIcon className=\"w-6 h-6\" />\n      },\n      {\n        name: 'Event Search',\n        component: <div>Event Search Component</div>,\n        description: 'Search historical events',\n        icon: <ClockIcon className=\"w-6 h-6\" />\n      }\n    ]\n  },\n  english: {\n    name: 'English Tools',\n    icon: <BookOpenIcon className=\"w-6 h-6\" />,\n    tools: [\n      {\n        name: 'Grammar Checker',\n        component: <GrammarChecker />,\n        description: 'Check grammar and spelling',\n        icon: <BookOpenIcon className=\"w-6 h-6\" />\n      },\n      {\n        name: 'Thesaurus',\n        component: <div>Thesaurus Component</div>,\n        description: 'Find synonyms and antonyms',\n        icon: <BookOpenIcon className=\"w-6 h-6\" />\n      },\n      {\n        name: 'Writing Assistant',\n        component: <div>Writing Assistant Component</div>,\n        description: 'Get writing suggestions',\n        icon: <BookOpenIcon className=\"w-6 h-6\" />\n      }\n    ]\n  },\n  programming: {\n    name: 'Programming Tools',\n    icon: <CodeBracketIcon className=\"w-6 h-6\" />,\n    tools: [\n      {\n        name: 'Code Runner',\n        component: <CodeRunner />,\n        description: 'Run and test code snippets',\n        icon: <CodeBracketIcon className=\"w-6 h-6\" />\n      },\n      {\n        name: 'Syntax Checker',\n        component: <div>Syntax Checker Component</div>,\n        description: 'Check code syntax',\n        icon: <CodeBracketIcon className=\"w-6 h-6\" />\n      },\n      {\n        name: 'API Reference',\n        component: <div>API Reference Component</div>,\n        description: 'Quick access to API documentation',\n        icon: <CodeBracketIcon className=\"w-6 h-6\" />\n      }\n    ]\n  }\n};\n\n// Helper function to convert markdown-like formatting to HTML\nconst formatMessage = (content) => {\n  if (!content) return '';\n  \n  // Split content into lines\n  const lines = content.split('\\n');\n  let formattedContent = '';\n  let currentList = '';\n  let inList = false;\n  let isFirstParagraph = true;\n  let listType = '';\n  let listLevel = 0;\n\n  lines.forEach((line) => {\n    // Handle bold text first (before other formatting)\n    line = line.replace(/\\*\\*(.*?)\\*\\*/g, (match, text) => {\n      return `<strong>${text}</strong>`;\n    });\n\n    // Handle headings\n    if (line.startsWith('# ')) {\n      formattedContent += `<h2>${line.substring(2)}</h2>`;\n      return;\n    }\n    if (line.startsWith('## ')) {\n      formattedContent += `<h3>${line.substring(3)}</h3>`;\n      return;\n    }\n\n    // Handle italic text\n    line = line.replace(/\\*(.*?)\\*/g, '<em>$1</em>');\n\n    // Handle lists\n    if (line.trim().startsWith('* ')) {\n      if (!inList) {\n        inList = true;\n        // Determine list type based on content\n        if (line.includes(':')) {\n          listType = 'category-list';\n        } else if (line.includes('?')) {\n          listType = 'question-list';\n        } else {\n          listType = 'topic-list';\n        }\n        currentList = `<ul class=\"${listType}\">`;\n      }\n      currentList += `<li>${line.substring(2).trim()}</li>`;\n      return;\n    } else if (inList) {\n      inList = false;\n      formattedContent += currentList + '</ul>';\n      currentList = '';\n      listType = '';\n    }\n\n    // Handle example blocks\n    if (line.startsWith('Example:')) {\n      formattedContent += `<div class=\"example\">${line.substring(8).trim()}</div>`;\n      return;\n    }\n\n    // Handle notes\n    if (line.startsWith('Note:')) {\n      formattedContent += `<div class=\"note\">${line.substring(5).trim()}</div>`;\n      return;\n    }\n\n    // Handle regular paragraphs\n    if (line.trim()) {\n      if (isFirstParagraph) {\n        formattedContent += `<p class=\"intro\">${line}</p>`;\n        isFirstParagraph = false;\n      } else {\n        formattedContent += `<p>${line}</p>`;\n      }\n    }\n  });\n\n  // Close any open list\n  if (inList) {\n    formattedContent += currentList + '</ul>';\n  }\n\n  return formattedContent;\n};\n\nfunction App() {\n  // State management\n  const [input, setInput] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [selectedSubject, setSelectedSubject] = useState(null);\n  const [showSubjectSelector, setShowSubjectSelector] = useState(true);\n  const messagesEndRef = useRef(null);\n  const [activeTool, setActiveTool] = useState(null);\n  const [showTools, setShowTools] = useState(false);\n\n  // Auto-scroll to bottom when messages change\n  const scrollToBottom = useCallback(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, []);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages, scrollToBottom]);\n\n  // Error handling helper\n  const handleError = useCallback((err) => {\n    console.error('Error in API call:', err.response?.data || err);\n    const errorDetails = err.response?.data || {};\n    setError(\n      `Error: ${errorDetails.error || 'Failed to send message'}\\n` +\n      `Details: ${errorDetails.details || 'Please try again'}\\n` +\n      (errorDetails.code ? `Code: ${errorDetails.code}\\n` : '') +\n      (errorDetails.type ? `Type: ${errorDetails.type}` : '')\n    );\n  }, []);\n\n  // Message sending logic\n  const sendMessage = useCallback(async (messageContent = null) => {\n    const content = messageContent || input.trim();\n    if (!content) return;\n    \n    const userMsg = { \n      role: 'user', \n      content,\n      subject: selectedSubject\n    };\n    const newMessages = [...messages, userMsg];\n    setMessages(newMessages);\n    if (!messageContent) setInput('');\n    setError(null);\n    setIsLoading(true);\n\n    try {\n      console.log('Sending request to server:', { messages: newMessages, subject: selectedSubject });\n      const res = await axios.post(`${API_URL}/chat`, { \n        messages: newMessages,\n        subject: selectedSubject\n      });\n      console.log('Received response from server:', res.data);\n      \n      // Extract the message from the nested structure\n      const botMessage = res.data.message || res.data;\n      console.log('Processed bot message:', botMessage);\n      \n      setMessages(prev => [...prev, botMessage]);\n    } catch (err) {\n      console.error('Error in sendMessage:', err);\n      handleError(err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [input, messages, handleError, selectedSubject]);\n\n  // Keyboard event handler\n  const handleKeyPress = useCallback((e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  }, [sendMessage]);\n\n  // Send initial message\n  useEffect(() => {\n    if (messages.length === 0 && selectedSubject) {\n      sendMessage(`I need help with ${SUBJECTS[selectedSubject].name}`);\n    }\n  }, [messages.length, sendMessage, selectedSubject]);\n\n  const handleSubjectSelect = (subject) => {\n    setSelectedSubject(subject);\n    setShowSubjectSelector(false);\n    setMessages([]); // Clear previous messages when changing subjects\n  };\n\n  return (\n    <div className=\"app-container\">\n      <h1 className=\"app-title\">Student Assist Bot</h1>\n      \n      {showSubjectSelector ? (\n        <div className=\"subject-selector\">\n          <h2>Select a Subject</h2>\n          <div className=\"subject-grid\">\n            {Object.entries(SUBJECTS).map(([key, subject]) => (\n              <button\n                key={key}\n                className=\"subject-card\"\n                onClick={() => handleSubjectSelect(key)}\n              >\n                <span className=\"subject-icon\">{subject.icon}</span>\n                <span className=\"subject-name\">{subject.name}</span>\n                <span className=\"subject-description\">{subject.description}</span>\n              </button>\n            ))}\n          </div>\n        </div>\n      ) : (\n        <>\n          <div className=\"subject-header\">\n            <button \n              className=\"change-subject-btn\"\n              onClick={() => setShowSubjectSelector(true)}\n            >\n              Change Subject\n            </button>\n            <h2 className=\"current-subject\">\n              {SUBJECTS[selectedSubject].icon} {SUBJECTS[selectedSubject].name}\n            </h2>\n            <button \n              className=\"tools-toggle-btn\"\n              onClick={() => setShowTools(!showTools)}\n            >\n              {SUBJECT_TOOLS[selectedSubject].icon}\n              <span>Tools</span>\n            </button>\n          </div>\n\n          <div className=\"main-content\">\n            {showTools && (\n              <div className=\"tools-panel\">\n                <h3>{SUBJECT_TOOLS[selectedSubject].name}</h3>\n                <div className=\"tools-grid\">\n                  {SUBJECT_TOOLS[selectedSubject].tools.map((tool, index) => (\n                    <button\n                      key={index}\n                      className=\"tool-card\"\n                      onClick={() => setActiveTool(tool.component)}\n                    >\n                      <div className=\"tool-icon\">{tool.icon}</div>\n                      <h4>{tool.name}</h4>\n                      <p>{tool.description}</p>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            <div className=\"chat-container\">\n              {activeTool && (\n                <div className=\"active-tool\">\n                  {activeTool}\n                </div>\n              )}\n              {messages.map((msg, i) => {\n                console.log('Rendering message:', msg);\n                return (\n                  <div key={i} className={`message ${msg.role}`}>\n                    <div \n                      className={`message-content ${msg.format === 'formatted' ? 'formatted' : ''}`}\n                      dangerouslySetInnerHTML={{ \n                        __html: msg.format === 'formatted' ? (msg.content || '') : formatMessage(msg.content || '')\n                      }}\n                    />\n                  </div>\n                );\n              })}\n              {isLoading && (\n                <div className=\"message assistant\">\n                  <div className=\"typing-indicator\">\n                    <span className=\"dot\"></span>\n                    <span className=\"dot\"></span>\n                    <span className=\"dot\"></span>\n                  </div>\n                </div>\n              )}\n              <div ref={messagesEndRef} />\n            </div>\n          </div>\n\n          {error && (\n            <div className=\"error-message\" role=\"alert\">\n              <ExclamationCircleIcon aria-hidden=\"true\" />\n              <pre style={{ whiteSpace: 'pre-wrap', margin: 0 }}>{error}</pre>\n            </div>\n          )}\n\n          <div className=\"input-container\">\n            <textarea\n              value={input}\n              onChange={e => setInput(e.target.value)}\n              onKeyPress={handleKeyPress}\n              placeholder={`Ask a question about ${SUBJECTS[selectedSubject].name}... (Press Enter to send)`}\n              rows=\"2\"\n              disabled={isLoading}\n              aria-label=\"Message input\"\n            />\n            <button\n              onClick={() => sendMessage()}\n              disabled={isLoading || !input.trim()}\n              aria-label=\"Send message\"\n            >\n              Send\n            </button>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}